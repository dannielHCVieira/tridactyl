# Tridactyl news - Winter 2024

Hello,

Welcome to the tenth Tridactyl newsletter! It looks like I've fallen into a routine of doing them biennially; I'll try to make them at least once a year because we're adding stuff to Tridactyl at such a rate that it becomes a little difficult to summarise it all.

What follows is a brief exploration of the changes in Tridactyl since the last newsletter came out in February 2023.

## Highlighted new features

I'll go through a few of my favourite new features, ones that I myself am using daily. The first is that we added a new `:reader` mode, left unbound by default because while we take every precaution, running it on untrusted websites opens up a larger attack surface than using the built-in Firefox reader (which remains accessible on the `gr` bind and with the `:reader --old` command). You can of course bind to the new mode with `:bind gr reader`, which is what I personally do. This lets you use all of the Tridactyl commands and interface on a minimal "reader" style interface and seems in general to work on slightly more websites than the built-in mode. I use it on websites that go slightly overboard with the cookie warnings, modal newsletter pop-ups and banner adverts ... that is to say, most of them :)

A totally different but equally transformative feature we've added is the ability to sort tabs everywhere in Tridactyl in a "most recently used" fashion. By running `:set tabsort mru`, not only will `b`/`:tab` completions be sorted by recency, but within Tridactyl internally all the commands will use recency indices too, meaning that for example `[n]gt` will take you to the nth-most-recently-used tab rather than the tab with index n. I found it took about a week to get used to but now I can't imagine using Firefox and Tridactyl in any other way. It makes doing housekeeping on tabs easy too, because one can just press shift-tab to get to the end of the `:tab` list in recency to find the ones that haven't been used in a while, and then close them one by one with shift-delete.

For something a little more niche, Tridactyl's support for non-English keyboard layouts has got a little better with the addition of `:set keyboardlayoutforce true`. This forces Tridactyl to see your keyboard as if it was a different layout - by default, US, but configurable via `:set keyboardlayoutbase`. This means that for example, pressing the home row key for the right hand will always be interpreted as j, which is bound by default to scrolling down. If you're frequently switching between keyboard layouts so you can easily type in different languages (for example, colemak and b√©po), your Tridactyl binds will stay in the same physical location.

A cool command that I've been using a lot personally and will be of interest to anyone who uses a mobile device is the new `yq` bind, which temporarily displays the current URL as a QR code. There's also a `q` bind in visual mode and a `:text2qr` command for general programmatic use.

A small quality of life improvement is that `:open` and related commands now have completions for searchurls and previous searches.

A few improvements have come to hints: there's now `:set hintstyles.{bg, fg, outline}` for changing the style of hints without changing your theme, `;c` and `;:` for context menu / mouse hover binds added for `:native` and `xdotool` users. There are also new flags: `-x` for excluding CSS selectors and `-C` for including extra CSS selectors alongside the defaults.

With the command line open, `<C-o>t` opens a new tab in the background for the selected completion which I find especially useful with `:back` completions. Don't forget that all binds for the command line can be viewed with `:viewconfig exmaps` and in `:bind --mode=ex ` completions - I think most people are unaware of them, which is a shame because `<S-Delete>` to close `:tab ` completions is one of my favourite Tridactyl features.

A pretty odd feature that I am not totally unconvinced of the utility of is that we now have experimental support for opening arbitrary pages in the sidebar. See `:help sidebartoggle` and `:help sidebaropen` for more details; it works somewhat well with `:hint -W sidebaropen` but again I'm still not sure what it's useful for. Feel free to tell us if you do find it useful.

An extremely niche feature is the new `:jsua` command which preserves "user action" intent when using browser binds, needed for triggering certain Web Extension APIs such as `browser.sidebarAction.open()`. I suspect there are about three people in the world who care about this :). We've also added `tri.bg` and `tri.tabs` for easy communication between tab and background contexts in `:jsb` and `:js`, see their help pages for more information.

Something that I suspect will interest people who don't read this newsletter more than people who do is that we've started the groundwork for multi-browser support in our linting scripts. We haven't considered how to go about Manifest V3 support at all, so support for Chromium would still be a long way off, even if we wanted to. But it's nice that the option to slowly port to Chromium-based browsers who maintain support for Manifest V2 is there.

For those of you who want to talk about Tridactyl to other people, you'll be happy to know that docs are now built and hosted [on our website](https://tridactyl.xyz/build/static/docs/modules/_src_excmds_.html). I find I use it a lot when helping people on Discord/IRC/Matrix, maybe you will too.

## Neat bug fixes

We've finally fixed a feature that had been broken in Tridactyl for years - the grey hints for elements that have Javascript event handlers associated with them now work again. On some sites, this means that there are lots of duplicated hints - just run `:hint -J` (with perhaps `:bindurl ... f hint -J`) to exclude them from the displayed hints.

`:guiset gui none` works again in Firefox 133 - you may find that you need to rerun it.

In an apparent attempt to make me hate React even more than I already did, server-side rendering on React and Next.js started vandalising Tridactyl. I had to write a workaround so that Tridactyl reinserts itself when it detects that server-side React is running. Our detection isn't foolproof so may need to use `:seturl ... commandlineterriblewebsitefix true` to force Tridactyl to reinsert itself proactively. Since a fair number of the readers of this newsletter are probably web-developers, this might be a good time to remind you all that [friends don't let friends use React](https://infrequently.org/2024/11/if-not-react-then-what/). There are plenty of modern approaches to web development that don't spend their time reimplementing basic browser features, like Svelte or Lit. I have to say that my opinions on this hardened slightly after I was forced to write some code to deal with React tearing up the whole web page because the user agent dared to make some modifications to it.

This one probably only affects a small number of you, but `:apropos` will now work even if you have created a custom setting, which is important, because it's a great command for exploring Tridactyl :)

A bug that had been annoying me for most of the life of Tridactyl is that keypresses typed too quickly after a command opened the commandline would be lost. We now buffers character keypresses which has improved this a lot (although we can still lose some keys before the buffer starts collecting them, depending on how quick your computer is).

Most `searchurls` have been removed because people (especially me) found them annoying, you can add them back with `:set searchurls.[name] [url]` if there are any that you find yourself missing.

Finally, and most importantly, I added my [mastodon account](https://masto.ai/@bovine3dom) to the new tab page so that people can listen to me complain about about trains.

## Plans for next few months (years?)

I don't have anything terribly exciting planned for Tridactyl at the moment - we've got 82 pull requests open at the time of writing which is about 70 more than I would like, so I think I'll start trying to go through them and see what can be merged or freshened up and what should be closed. It's been a long time since I picked issues out at random to fix them so I'll probably set aside a weekend or two for that soon. At the back of my mind, I always think about rewriting our completion/commandline to be more deterministic and more configurable but the trouble is that it kind of works OK so it doesn't seem worth the time required to get it going. I would also like to fix up the ["keyup" bind PR](https://github.com/tridactyl/tridactyl/pull/4727) since that would enable real smooth scrolling which seems to be one of the main barriers to people using Tridactyl, but keybinds are such a key part of Tridactyl that the idea of touching that code and breaking it slightly is honestly a little bit terrifying. And then finally I still have [godmode](https://github.com/tridactyl/godmode) on my wishlist, which should get Tridactyl running on PDF and other pages like Firefox's own extensions such as the screenshot tool, for people who are prepared to patch Firefox.

As always, thanks for your generous support,

bovine3dom and the rest of the Tridactyl developers
